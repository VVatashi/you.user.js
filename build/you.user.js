// ==UserScript==
// @name        (You)
// @include     *
// @version     0.1.5
// @grant       GM_getValue
// @grant       GM_setValue
// @require     http://code.jquery.com/jquery-3.1.1.min.js
// @run-at      document-end
// @namespace   https://github.com/VVatashi
// @downloadURL https://raw.githubusercontent.com/VVatashi/-You-/master/build/you.user.js
// @updateURL   https://raw.githubusercontent.com/VVatashi/-You-/master/build/you.user.js
// ==/UserScript==

!function t(e,n,o){function r(i,s){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!s&&c)return c(i,!0);if(a)return a(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[i]={exports:{}};e[i][0].call(l.exports,function(t){var n=e[i][1][t];return r(n?n:t)},l,l.exports,t,e,n,o)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<o.length;i++)r(o[i]);return r}({1:[function(t,e,n){"use strict";var o=function(){function t(t,e,n,o,r){this.name=t,this.trip=e,this.myPostStyle=n,this.replyPostStyle=o,this.replyLinkStyle=r}return t.save=function(e){GM_setValue(t.localStorageKey,JSON.stringify(e))},t.load=function(){return JSON.parse(GM_getValue(t.localStorageKey,JSON.stringify(t.default)))},t.default=new t("Name","!Trip","{ box-shadow: 6px 0 2px -2px rgba(97,107,134,.8), -6px 0 2px -2px rgba(97,107,134,.8); }","{ box-shadow: 6px 0 2px -2px rgba(157,47,208,.8), -6px 0 2px -2px rgba(157,47,208,.8); }",":after { content: ' (You)'; }"),t.localStorageKey="you-config",t}();n.Config=o},{}],2:[function(t,e,n){"use strict";var o=function(){function t(){this.adminBarSelector=".adminbar, #adminbar, .boardlist, .menu, .board-list",this.postSelector="td.reply[id], div.reply[id], td.post[id], div.post[id], div.thread_OP[id], div.thread_reply[id]",this.postBodySelector="blockquote, .body, .postbody, .post_body",this.nameSelector=".postername, .name, .commentpostername, .poster-name",this.tripSelector=".postertrip, .trip, .tripcode"}return t.prototype.getAdminBar=function(){return $(this.adminBarSelector).first()},t.prototype.getPosts=function(){return $(this.postSelector)},t.prototype.getName=function(t){return t.find(this.nameSelector).text()},t.prototype.getTripcode=function(t){return t.find(this.tripSelector).text()},t.prototype.getPostBody=function(t){return t.find(this.postBodySelector)},t.prototype.getPostBodyText=function(t){return this.getPostBody(t).text()},t.prototype.getPostBodyLinks=function(t){return this.getPostBody(t).find("a")},t}();n.ImageBoard=o},{}],3:[function(t,e,n){"use strict";function o(){for(var t=["2ch.hk","dobrochan.com","iichan.hk","syn-ch.com","2-ch.su","nowere.net","410chan.org","kurisa.ch","chuck.dfwk.ru","owlchan.ru","haibane.ru","volgach.ru","hohoemy.exach.com","zerochan.ru","haruhichan.ovh","chaos.cyberpunk.us","02ch.in","ozuchan.ru","dvach.hut2.ru","2watch.su"],e=0;e<t.length;e++)if(window.location.hostname.indexOf(t[e])!=-1)return!0;return!1}function r(){var t=document.createElement("style");t.type="text/css",t.innerHTML="\n."+l+f.myPostStyle+"\n\n."+d+f.replyPostStyle+"\n\n."+p+f.replyLinkStyle+"\n\nform."+u+" {\n    position: absolute;\n    background-color: white;\n    box-shadow: 0px 2px 6px 0px rgba(97,107,134,.8);\n    padding: 12px 16px;\n    z-index: 1;\n    min-width: 30%;\n}\n\nform."+u+" table, form."+u+" p {\n    color: black;\n    background-color: white;\n    width: 100%;\n}\n\nform."+u+" tr, form."+u+" textarea {\n    width: 100%;\n}",document.head.appendChild(t)}function a(){var t="you-config-name",e="you-config-trip",n="you-config-mypost-style",o="you-config-replypost-style",r="you-config-replylink-style",a="you-config-toogle",i="you-config-save",c="you-config-default";y.getAdminBar().after('\n[ <a class="'+a+'">(You) config</a> ]\n<br />\n<form class="'+u+'">\n    <table>\n        <tr><td>Name:</td><td><input type="text" class="'+t+'" value="'+f.name+'" /></td></tr>\n        <tr><td>Trip:</td><td><input type="text" class="'+e+'" value="'+f.trip+'" /></td></tr>\n        <tr><td>My post css:</td><td><textarea class="'+n+'">'+f.myPostStyle+'</textarea></td></tr>\n        <tr><td>Reply post css:</td><td><textarea class="'+o+'">'+f.replyPostStyle+'</textarea></td></tr>\n        <tr><td>Reply link css:</td><td><textarea class="'+r+'">'+f.replyLinkStyle+'</textarea></td></tr>\n        <tr><td colspan="2"><button class="'+i+'">Save</button><button class="'+c+'">Restore defaults</button></td></tr>\n    </table>\n    <p>Reload page to apply changes.</p>\n</form>\n'),$("a."+a).click(function(){return $("form."+u).toggle(),!1}),$("button."+i).click(function(){return f.name=$("input."+t).val(),f.trip=$("input."+e).val(),f.myPostStyle=$("textarea."+n).val(),f.replyPostStyle=$("textarea."+o).val(),f.replyLinkStyle=$("textarea."+r).val(),s.Config.save(f),!1}),$("button."+c).click(function(){return f=s.Config.default,$("input."+t).val(f.name),$("input."+e).val(f.trip),$("textarea."+n).val(f.myPostStyle),$("textarea."+o).val(f.replyPostStyle),$("textarea."+r).val(f.replyLinkStyle),s.Config.save(f),!1}),$("form."+u).hide()}function i(){var t="you-processed",e=y.getPosts().not("."+t),n=e.filter(function(t,e){var n=y.getName($(e)),o=y.getTripcode($(e));return n.indexOf(f.name)!=-1&&o.indexOf(f.trip)!=-1});n.addClass(l);var o=$.map(n,function(t,e){return $(t).attr("id").match(/\d+/)[0]});h=h.concat(o);var r=e.filter(function(t,e){for(var n=y.getPostBodyText($(e)),o=0;o<h.length;o++)if(n.indexOf(">>"+h[o])!=-1)return!0;return!1});r.addClass(d),y.getPostBodyLinks(r).each(function(t,e){for(var n=$(e).text(),o=0;o<h.length;o++)if(n==">>"+h[o])return void $(e).addClass(p)}),e.addClass(t)}var s=t("./config"),c=t("./imageboard"),u="you-config-form",l="you-post-my",d="you-post-reply",p="you-post-reply-link",f=s.Config.default,y=new c.ImageBoard,h=[];$(document).ready(function(){o()&&(f=s.Config.load(),r(),a(),i(),setInterval(i,1e4))})},{"./config":1,"./imageboard":2}]},{},[3]);
//# sourceMappingURL=you.user.js.map
