{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/config.ts","src/imageboard.ts","src/main.ts","src/utils.ts"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","Config","name","trip","myPostStyle","replyPostStyle","replyLinkStyle","this","save","config","GM_setValue","localStorageKey","JSON","stringify","load","parse","GM_getValue","default","ImageBoard","adminBarSelector","postSelector","postSubjectSelector","postNameSelector","postTripSelector","postBodySelector","postSubjectelector","prototype","getAdminBar","$","first","getPosts","getPostSubject","post","find","text","getPostName","getPostTripcode","getPostBody","posts","getPostBodyText","getPostBodyLinks","getName","detect","Hanabira","_super","__extends","contains","Makaba","hasClass","Tinyboard","TinyIB","Monaba","Phutaba","Ochoba","filter","index","element","attr","Wakaba","Kusaba","GetImageBoard","engines","reset","processedClass","removeClass","myPostClass","replyPostClass","replyLinkClass","myPostsIds","createCss","main","styleId","remove","css","document","createElement","id","type","innerHTML","modalContainerClass","configFormClass","head","appendChild","createForm","configNameFieldClass","configTripFieldClass","configMyPostStyleFieldClass","configReplyPostStyleFieldClass","configReplyLinkStyleFieldClass","configToogleButtonClass","configSaveButtonClass","configDefaultButtonClass","parent","imageboard","append","configFormId","click","val","config_1","window","location","href","newPosts","not","myNewPosts","addClass","myNewPostsIds","map","match","concat","replies","replyBodyText","each","linkText","imageboard_1","ready","console","log","setInterval","Utils","String","str","caseInsensitive","undefined","toUpperCase","indexOf"],"mappings":"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","file":"you.user.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","export class Config {\r\n    public name: string;\r\n    public trip: string;\r\n    public myPostStyle: string;\r\n    public replyPostStyle: string;\r\n    public replyLinkStyle: string;\r\n\r\n    private constructor(name: string, trip: string, myPostStyle: string, replyPostStyle: string, replyLinkStyle: string) {\r\n        this.name = name;\r\n        this.trip = trip;\r\n        this.myPostStyle = myPostStyle;\r\n        this.replyPostStyle = replyPostStyle;\r\n        this.replyLinkStyle = replyLinkStyle;\r\n    }\r\n\r\n    public static readonly default: Config = new Config('Name', '!Trip',\r\n        `{ box-shadow: 6px 0 2px -2px rgba(97,107,134,.8), -6px 0 2px -2px rgba(97,107,134,.8); }`,\r\n        `{ box-shadow: 6px 0 2px -2px rgba(157,47,208,.8), -6px 0 2px -2px rgba(157,47,208,.8); }`,\r\n        `:after { content: ' (You)'; }`);\r\n\r\n    private static readonly localStorageKey = 'you-config';\r\n\r\n    public static save(config: Config) {\r\n        GM_setValue(Config.localStorageKey, JSON.stringify(config));\r\n    }\r\n\r\n    public static load(): Config {\r\n        return JSON.parse(GM_getValue(Config.localStorageKey, JSON.stringify(Config.default)));\r\n    }\r\n}\r\n","export class ImageBoard {\r\n    protected readonly name: string;\r\n\r\n    protected readonly adminBarSelector: string;\r\n    protected readonly postSelector: string;\r\n\r\n    protected readonly postSubjectelector: string;\r\n    protected readonly postNameSelector: string;\r\n    protected readonly postTripSelector: string;\r\n    protected readonly postBodySelector: string;\r\n\r\n    protected constructor(name: string, adminBarSelector: string, postSelector: string,\r\n        postSubjectSelector: string, postNameSelector: string, postTripSelector: string, postBodySelector: string) {\r\n        this.name = name;\r\n        this.adminBarSelector = adminBarSelector;\r\n        this.postSelector = postSelector;\r\n\r\n        this.postSubjectelector = postSubjectSelector;\r\n        this.postNameSelector = postNameSelector;\r\n        this.postTripSelector = postTripSelector;\r\n        this.postBodySelector = postBodySelector;\r\n    }\r\n\r\n    public getAdminBar(): JQuery {\r\n        return $(this.adminBarSelector).first();\r\n    }\r\n\r\n    public getPosts(): JQuery {\r\n        return $(this.postSelector);\r\n    }\r\n\r\n    public getPostSubject(post: JQuery): string {\r\n        return post.find(this.postSubjectelector).text();\r\n    }\r\n\r\n    public getPostName(post: JQuery): string {\r\n        return post.find(this.postNameSelector).text();\r\n    }\r\n\r\n    public getPostTripcode(post: JQuery): string {\r\n        return post.find(this.postTripSelector).text();\r\n    }\r\n\r\n    public getPostBody(posts: JQuery): JQuery {\r\n        return posts.find(this.postBodySelector);\r\n    }\r\n\r\n    public getPostBodyText(post: JQuery): string {\r\n        return this.getPostBody(post).text();\r\n    }\r\n\r\n    public getPostBodyLinks(posts: JQuery): JQuery {\r\n        return this.getPostBody(posts).find('a');\r\n    }\r\n\r\n    public getName(): string {\r\n        return this.name;\r\n    }\r\n\r\n    public static detect(): boolean {\r\n        return false;\r\n    }\r\n}\r\n\r\nclass Hanabira extends ImageBoard {\r\n    public constructor() {\r\n        super('Hanabira', 'div.adminbar', 'td.reply[id]', 'span.replytitle', 'span.postername', 'span.postertrip', 'div.message');\r\n    }\r\n\r\n    public static detect(): boolean {\r\n        return $('p.footer').text().contains('hanabira', true);\r\n    }\r\n}\r\n\r\nclass Makaba extends ImageBoard {\r\n    public constructor() {\r\n        super('Makaba', 'div#adminbar', 'div.post[id]', 'span.post-title', 'span.ananimas', 'span.postertrip', 'blockquote');\r\n    }\r\n\r\n    public static detect(): boolean {\r\n        return $('body').hasClass('makaba');\r\n    }\r\n}\r\n\r\nclass Tinyboard extends ImageBoard {\r\n    public constructor() {\r\n        super('Tinyboard', 'div.boardlist', 'div.post[id]', 'span.subject', 'span.name', 'span.trip', 'div.body');\r\n    }\r\n\r\n    public static detect(): boolean {\r\n        return $('footer').text().contains('tinyboard', true);\r\n    }\r\n}\r\n\r\nclass TinyIB extends ImageBoard {\r\n    public constructor() {\r\n        super('TinyIB', 'div.adminbar', 'td.reply[id], div.post[id]', 'span.filetitle', 'span.postername', 'span.postertrip', 'div.message');\r\n    }\r\n\r\n    public static detect(): boolean {\r\n        return $('footer').text().contains('tinyib', true);\r\n    }\r\n}\r\n\r\nclass Monaba extends ImageBoard {\r\n    public constructor() {\r\n        super('Monaba', 'div#control-panel', 'div.post[id]', 'span.reply-title', 'span.poster-name', 'span.poster-trip', 'div.message');\r\n    }\r\n\r\n    public static detect(): boolean {\r\n        return $('footer').text().contains('monaba', true);\r\n    }\r\n}\r\n\r\nclass Phutaba extends ImageBoard {\r\n    public constructor() {\r\n        super('Phutaba', 'ul.menu', 'div.thread_OP[id], div.thread_reply[id]', 'span.subject', 'span.postername', 'span.tripcode', 'div.post_body');\r\n    }\r\n\r\n    public static detect(): boolean {\r\n        return $('footer').text().contains('phutaba', true);\r\n    }\r\n}\r\n\r\nclass Ochoba extends ImageBoard {\r\n    public constructor() {\r\n        super('Ochoba', 'div.adminbar', 'td.reply[id]', 'span.replytitle', 'span.commentpostername', 'span.postertrip', 'blockquote');\r\n    }\r\n\r\n    public static detect(): boolean {\r\n        return $('script[src]').filter((index, element) =>\r\n            $(element).attr('src').contains('ochoba', true)\r\n        ).length > 0;\r\n    }\r\n}\r\n\r\nclass Wakaba extends ImageBoard {\r\n    public constructor() {\r\n        super('Wakaba', 'div.adminbar, div#adminbar', 'td.reply[id]', 'span.filetitle', 'span.postername, span.commentpostername', 'span.postertrip', 'blockquote');\r\n    }\r\n\r\n    public static detect(): boolean {\r\n        return $('script[src]').filter((index, element) =>\r\n            $(element).attr('src').contains('wakaba', true)\r\n        ).length > 0;\r\n    }\r\n}\r\n\r\nclass Kusaba extends ImageBoard {\r\n    public constructor() {\r\n        super('Kusaba', 'div.adminbar', 'td.reply[id], div.reply[id]', 'span.filetitle', 'span.postername', 'span.postertrip', 'blockquote');\r\n    }\r\n\r\n    public static detect(): boolean {\r\n        return $('script[src]').filter((index, element) =>\r\n            $(element).attr('src').contains('kusaba', true)\r\n        ).length > 0;\r\n    }\r\n}\r\n\r\nexport namespace ImageBoard {\r\n    export function GetImageBoard(): ImageBoard {\r\n        const engines = [Hanabira, Makaba, Tinyboard, TinyIB, Monaba, Phutaba, Ochoba, Wakaba, Kusaba];\r\n\r\n        for (let i = 0; i < engines.length; i++) {\r\n            if (engines[i].detect())\r\n                return new engines[i];\r\n        }\r\n\r\n        return null;\r\n    }\r\n}\r\n","import { Config } from './config';\r\nimport { ImageBoard } from './imageboard';\r\n\r\nconst modalContainerClass = 'you-modal-container';\r\nconst styleId = 'you-style';\r\nconst configFormId = 'you-config-form';\r\nconst configFormClass = 'you-config-form';\r\nconst processedClass = 'you-processed';\r\nconst myPostClass = 'you-post-my';\r\nconst replyPostClass = 'you-post-reply';\r\nconst replyLinkClass = 'you-post-reply-link';\r\n\r\nlet config: Config = Config.default;\r\nlet imageboard: ImageBoard;\r\nlet myPostsIds: string[] = [];\r\n\r\nfunction reset() {\r\n    $('.' + processedClass).removeClass(processedClass);\r\n    $('.' + myPostClass).removeClass(myPostClass);\r\n    $('.' + replyPostClass).removeClass(replyPostClass);\r\n    $('.' + replyLinkClass).removeClass(replyLinkClass);\r\n\r\n    myPostsIds = [];\r\n\r\n    createCss();\r\n    main();\r\n}\r\n\r\nfunction createCss() {\r\n    $('#' + styleId).remove();\r\n\r\n    let css = document.createElement(\"style\");\r\n    css.id = styleId;\r\n    css.type = \"text/css\";\r\n\r\n    css.innerHTML = `\r\n.${myPostClass}${config.myPostStyle}\r\n\r\n.${replyPostClass}${config.replyPostStyle}\r\n\r\n.${replyLinkClass}${config.replyLinkStyle}\r\n\r\ndiv.${modalContainerClass} {\r\n    position: fixed;\r\n    top: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n    background: rgba(0, 0, 0, 0.7);\r\n    transition: opacity 500ms;\r\n    visibility: hidden;\r\n    opacity: 0;\r\n}\r\n\r\ndiv.${modalContainerClass}:target {\r\n    visibility: visible;\r\n    opacity: 1;\r\n}\r\n\r\nform.${configFormClass} {\r\n    margin: 70px auto;\r\n    padding: 20px;\r\n    background-color: white;\r\n    border-radius: 5px;\r\n    width: 30%;\r\n    position: relative;\r\n    transition: all 5s ease-in-out;\r\n    text-align: justify;\r\n    z-index: 1000;\r\n}\r\n\r\nform.${configFormClass} table, form.${configFormClass} p, form.${configFormClass} input, form.${configFormClass} textarea {\r\n    color: black;\r\n    background-color: white;\r\n    width: 100%;\r\n}\r\n\r\nform.${configFormClass} input, form.${configFormClass} textarea {\r\n    border: solid 1px;\r\n}\r\n\r\nform.${configFormClass} tr {\r\n    width: 100%;\r\n}`;\r\n\r\n    document.head.appendChild(css);\r\n}\r\n\r\nfunction createForm() {\r\n    const configNameFieldClass = 'you-config-name';\r\n    const configTripFieldClass = 'you-config-trip';\r\n    const configMyPostStyleFieldClass = 'you-config-mypost-style';\r\n    const configReplyPostStyleFieldClass = 'you-config-replypost-style';\r\n    const configReplyLinkStyleFieldClass = 'you-config-replylink-style';\r\n\r\n    const configToogleButtonClass = 'you-config-toogle';\r\n    const configSaveButtonClass = 'you-config-save';\r\n    const configDefaultButtonClass = 'you-config-default';\r\n\r\n    let parent = imageboard.getAdminBar();\r\n\r\n    if (!parent || parent.length == 0)\r\n        parent = $('body');\r\n\r\n    parent.append(`\r\n[ <a class=\"${configToogleButtonClass}\" href=\"#${configFormId}\">(You) config</a> ]\r\n<div id=\"${configFormId}\" class=\"${modalContainerClass}\">\r\n    <form class=\"${configFormClass}\">\r\n        <table>\r\n            <tr>\r\n                <td>Name:</td>\r\n                <td><input type=\"text\" class=\"${configNameFieldClass}\" value=\"${config.name}\" /></td>\r\n            </tr>\r\n            <tr>\r\n                <td>Trip:</td>\r\n                <td><input type=\"text\" class=\"${configTripFieldClass}\" value=\"${config.trip}\" /></td>\r\n            </tr>\r\n            <tr>\r\n                <td>My post css:</td>\r\n                <td><textarea class=\"${configMyPostStyleFieldClass}\">${config.myPostStyle}</textarea></td>\r\n            </tr>\r\n            <tr>\r\n                <td>Reply post css:</td>\r\n                <td><textarea class=\"${configReplyPostStyleFieldClass}\">${config.replyPostStyle}</textarea></td>\r\n            </tr>\r\n            <tr>\r\n                <td>Reply link css:</td>\r\n                <td><textarea class=\"${configReplyLinkStyleFieldClass}\">${config.replyLinkStyle}</textarea></td>\r\n            </tr>\r\n            <tr>\r\n                <td colspan=\"2\" style=\"text-align: center;\">\r\n                    <button class=\"${configSaveButtonClass}\">Ok</button>\r\n                    <button class=\"${configDefaultButtonClass}\">Restore defaults</button>\r\n                </td>\r\n            </tr>\r\n        </table>\r\n    </form>\r\n</div>\r\n`);\r\n\r\n    $('button.' + configSaveButtonClass).click(() => {\r\n        config.name = $('input.' + configNameFieldClass).val();\r\n        config.trip = $('input.' + configTripFieldClass).val();\r\n        config.myPostStyle = $('textarea.' + configMyPostStyleFieldClass).val();\r\n        config.replyPostStyle = $('textarea.' + configReplyPostStyleFieldClass).val();\r\n        config.replyLinkStyle = $('textarea.' + configReplyLinkStyleFieldClass).val();\r\n        Config.save(config);\r\n\r\n        reset();\r\n\r\n        window.location.href = '#';\r\n        return false;\r\n    });\r\n\r\n    $('button.' + configDefaultButtonClass).click(() => {\r\n        config = Config.default;\r\n        $('input.' + configNameFieldClass).val(config.name);\r\n        $('input.' + configTripFieldClass).val(config.trip);\r\n        $('textarea.' + configMyPostStyleFieldClass).val(config.myPostStyle);\r\n        $('textarea.' + configReplyPostStyleFieldClass).val(config.replyPostStyle);\r\n        $('textarea.' + configReplyLinkStyleFieldClass).val(config.replyLinkStyle);\r\n        Config.save(config);\r\n        return false;\r\n    });\r\n}\r\n\r\nfunction main() {\r\n    let newPosts = imageboard.getPosts().not('.' + processedClass);\r\n    let myNewPosts = newPosts.filter((index, element) => {\r\n        let name = imageboard.getPostName($(element));\r\n        let trip = imageboard.getPostTripcode($(element));\r\n\r\n        return name.contains(config.name) && trip.contains(config.trip);\r\n    });\r\n\r\n    myNewPosts.addClass(myPostClass);\r\n\r\n    let myNewPostsIds = $.map(myNewPosts, (element, index) => {\r\n        return $(element).attr('id').match(/\\d+/)[0];\r\n    });\r\n\r\n    myPostsIds = myPostsIds.concat(myNewPostsIds);\r\n\r\n    let replies = newPosts.filter((index, element) => {\r\n        let replyBodyText = imageboard.getPostBodyText($(element));\r\n\r\n        for (let i = 0; i < myPostsIds.length; i++) {\r\n            if (replyBodyText.contains('>>' + myPostsIds[i]))\r\n                return true;\r\n        }\r\n\r\n        return false;\r\n    });\r\n\r\n    replies.addClass(replyPostClass);\r\n\r\n    imageboard.getPostBodyLinks(replies).each((index, element) => {\r\n        let linkText = $(element).text();\r\n\r\n        for (let i = 0; i < myPostsIds.length; i++) {\r\n            if (linkText == '>>' + myPostsIds[i]) {\r\n                $(element).addClass(replyLinkClass);\r\n                return;\r\n            }\r\n        }\r\n    });\r\n\r\n    newPosts.addClass(processedClass);\r\n}\r\n\r\n$(document).ready(() => {\r\n    imageboard = ImageBoard.GetImageBoard();\r\n\r\n    if (!imageboard) {\r\n        console.log('[You] imageboard not detected');\r\n        return;\r\n    }\r\n\r\n    console.log('[You] imageboard detected as ' + imageboard.getName());\r\n\r\n    config = Config.load();\r\n    createCss();\r\n    createForm();\r\n    main();\r\n\r\n    setInterval(main, 10000);\r\n});\r\n","interface String {\r\n    contains: (str: string, caseInsensitive?: boolean) => boolean;\r\n}\r\n\r\nmodule Utils {\r\n    if (typeof String.prototype.contains !== 'function') {\r\n        String.prototype.contains = function (str: string, caseInsensitive?: boolean): boolean {\r\n            if (caseInsensitive === undefined)\r\n                caseInsensitive = false;\r\n\r\n            if (caseInsensitive)\r\n                return this.toUpperCase().indexOf(str.toUpperCase()) != -1;\r\n            else\r\n                return this.indexOf(str) != -1;\r\n        };\r\n    }\r\n}\r\n"]}